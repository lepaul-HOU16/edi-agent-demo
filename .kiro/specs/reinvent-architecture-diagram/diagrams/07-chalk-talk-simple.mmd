graph TB
    subgraph "ğŸ‘¤ User Layer"
        USER[User Browser]
    end

    subgraph "ğŸ” Security"
        AUTH[Cognito Auth]
    end

    subgraph "ğŸ¤– AI Agents"
        ROUTER[Agent Router<br/>ğŸ¯ Intent Detection]
        PETRO[â›½ Oil & Gas]
        WIND[ğŸ’¨ Wind Energy]
        GENERAL[ğŸ’¬ General Chat]
    end

    subgraph "ğŸ› ï¸ Tools"
        TERRAIN[ğŸ—ºï¸ Terrain]
        LAYOUT[ğŸ“ Layout]
        CALC[ğŸ§® Calculations]
    end

    subgraph "ğŸ’¾ Data"
        DB[(Messages)]
        FILES[(Artifacts)]
    end

    USER -->|1. Query| AUTH
    AUTH -->|2. Validated| ROUTER
    ROUTER -->|Oil & Gas?| PETRO
    ROUTER -->|Wind Farm?| WIND
    ROUTER -->|Other?| GENERAL
    
    WIND --> TERRAIN
    WIND --> LAYOUT
    PETRO --> CALC
    
    TERRAIN --> FILES
    LAYOUT --> FILES
    CALC --> FILES
    
    ROUTER --> DB
    DB -->|3. Response| USER
    FILES -->|4. Visualizations| USER

    style ROUTER fill:#ff9900,stroke:#232f3e,stroke-width:3px
    style USER fill:#ec7211,stroke:#232f3e,stroke-width:3px
    style DB fill:#3b48cc,stroke:#232f3e,stroke-width:3px
    style FILES fill:#569a31,stroke:#232f3e,stroke-width:3px

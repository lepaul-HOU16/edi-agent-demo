# Requirements Document - re:Invent Diagram Updates 2025

## Introduction

This specification defines requirements for updating the AWS re:Invent architecture diagrams to comprehensively show all AWS services currently in use, add OSDU data integration architecture, and include AWS Data Catalog for data discovery and governance. The updated diagrams will be used for the AWS re:Invent chalk talk presentation.

## Glossary

- **OSDU (Open Subsurface Data Universe)**: Industry-standard data platform for energy data management and sharing
- **AWS Data Catalog**: AWS Glue Data Catalog for metadata management and data discovery
- **LAS Files**: Log ASCII Standard files containing well log data
- **Petrophysics**: Analysis of rock and fluid properties in oil and gas wells
- **Wind Farm Analysis**: Renewable energy site assessment including terrain, layout, and wake effects
- **Artifact**: Structured output (visualizations, reports, analysis results) generated by agents
- **AgentCore**: Multi-agent orchestration system using AWS Bedrock

## Requirements

### Requirement 1: Complete AWS Service Inventory

**User Story:** As a solutions architect viewing the re:Invent presentation, I want to see ALL AWS services used in the platform, so that I understand the complete architecture and can estimate costs.

#### Acceptance Criteria

1. THE diagram SHALL include Amazon Cognito for user authentication
2. THE diagram SHALL include Amazon API Gateway (HTTP API) for REST endpoints
3. THE diagram SHALL include AWS Lambda for all compute functions (authorizer, chat, agents, tools, orchestrator)
4. THE diagram SHALL include Amazon DynamoDB for all tables (ChatMessage, ChatSession, Project, AgentProgress, SessionContext)
5. THE diagram SHALL include Amazon S3 for storage (frontend bucket, storage bucket for artifacts and data)
6. THE diagram SHALL include Amazon CloudFront for CDN and frontend delivery
7. THE diagram SHALL include AWS Bedrock for AI/ML model access (Claude 3.5 Sonnet)
8. THE diagram SHALL include Amazon CloudWatch for logging and monitoring
9. THE diagram SHALL include AWS IAM for roles and permissions
10. THE diagram SHALL include AWS Glue Data Catalog for metadata management
11. THE diagram SHALL include AWS Secrets Manager for API key storage
12. THE diagram SHALL use official AWS Architecture Icons for all services

### Requirement 2: OSDU Data Integration Architecture

**User Story:** As a technical presenter, I want to show how OSDU data flows into the platform, so that the audience understands the data ingestion and integration patterns.

#### Acceptance Criteria

1. THE diagram SHALL show OSDU as an external data source
2. THE diagram SHALL highlight the data ingestion path from OSDU to S3
3. THE diagram SHALL show AWS Glue Data Catalog cataloging OSDU metadata
4. THE diagram SHALL indicate where OSDU well data (LAS files) is stored in S3
5. THE diagram SHALL show how petrophysics agents access OSDU data via S3
6. THE diagram SHALL use distinct visual styling (color, border, or icon) to highlight OSDU data flow
7. THE diagram SHALL show data transformation steps if any exist between OSDU and platform storage

### Requirement 3: AWS Data Catalog Integration

**User Story:** As a data engineer, I want to understand how AWS Data Catalog is used for data discovery, so that I can implement similar patterns in my organization.

#### Acceptance Criteria

1. THE diagram SHALL show AWS Glue Data Catalog as a central metadata repository
2. THE diagram SHALL show Data Catalog connections to S3 buckets containing well data
3. THE diagram SHALL show how Lambda functions query Data Catalog for data discovery
4. THE diagram SHALL indicate metadata schemas registered in Data Catalog
5. THE diagram SHALL show IAM permissions required for Data Catalog access
6. THE diagram SHALL document data catalog tables for well data, renewable projects, and artifacts

### Requirement 4: Enhanced Data Flow Visualization

**User Story:** As a solutions architect, I want to see clear data flow paths through the system, so that I can understand data lineage and troubleshoot issues.

#### Acceptance Criteria

1. THE diagram SHALL use numbered flow arrows showing request/response sequence
2. THE diagram SHALL use different arrow styles for synchronous vs asynchronous operations
3. THE diagram SHALL use different arrow colors for data reads vs writes
4. THE diagram SHALL show data flow from OSDU → S3 → Data Catalog → Lambda → DynamoDB → Frontend
5. THE diagram SHALL indicate where data is cached or transformed
6. THE diagram SHALL show artifact generation flow: Lambda → S3 → CloudFront → Frontend
7. THE diagram SHALL highlight critical path operations with visual emphasis

### Requirement 5: Service-Level Detail Diagrams

**User Story:** As a developer implementing similar patterns, I want detailed diagrams for each major service integration, so that I can understand implementation specifics.

#### Acceptance Criteria

1. THE documentation SHALL provide a dedicated diagram for Cognito authentication flow
2. THE documentation SHALL provide a dedicated diagram for API Gateway routing and authorization
3. THE documentation SHALL provide a dedicated diagram for Lambda agent orchestration
4. THE documentation SHALL provide a dedicated diagram for DynamoDB access patterns
5. THE documentation SHALL provide a dedicated diagram for S3 artifact storage and retrieval
6. THE documentation SHALL provide a dedicated diagram for Bedrock AI model invocation
7. THE documentation SHALL provide a dedicated diagram for OSDU data ingestion pipeline
8. THE documentation SHALL provide a dedicated diagram for Data Catalog metadata management

### Requirement 6: Cost and Performance Annotations

**User Story:** As a solutions architect planning capacity, I want to see service configurations and cost drivers, so that I can estimate operational costs.

#### Acceptance Criteria

1. THE diagram SHALL annotate Lambda functions with timeout and memory configurations
2. THE diagram SHALL annotate DynamoDB tables with capacity mode (on-demand)
3. THE diagram SHALL annotate S3 buckets with storage class and lifecycle policies
4. THE diagram SHALL indicate high-traffic paths that drive costs
5. THE diagram SHALL show CloudWatch log retention policies
6. THE diagram SHALL provide cost estimation table for typical usage patterns

### Requirement 7: Security and Compliance Annotations

**User Story:** As a security architect, I want to see security controls and data protection mechanisms, so that I can assess compliance requirements.

#### Acceptance Criteria

1. THE diagram SHALL show encryption at rest for DynamoDB and S3
2. THE diagram SHALL show encryption in transit (HTTPS/TLS) for all API calls
3. THE diagram SHALL show IAM roles and least-privilege permissions
4. THE diagram SHALL show Cognito JWT token validation flow
5. THE diagram SHALL indicate where PII or sensitive data is stored
6. THE diagram SHALL show CloudTrail audit logging integration
7. THE diagram SHALL document data retention and deletion policies

### Requirement 8: Multi-Agent Architecture Detail

**User Story:** As a developer building AI agents, I want to see the complete agent architecture, so that I can understand agent routing and orchestration patterns.

#### Acceptance Criteria

1. THE diagram SHALL show the AgentRouter as the central routing component
2. THE diagram SHALL show all specialized agents (Petrophysics, Renewable, Maintenance, EDIcraft, General)
3. THE diagram SHALL show intent detection and pattern matching logic
4. THE diagram SHALL show how agents invoke tool Lambdas
5. THE diagram SHALL show thought step generation for transparency
6. THE diagram SHALL show artifact generation and storage patterns
7. THE diagram SHALL show session context management across agent invocations

### Requirement 9: Async Processing Pattern Detail

**User Story:** As a backend developer, I want to understand the async processing pattern, so that I can handle long-running operations without timeouts.

#### Acceptance Criteria

1. THE diagram SHALL show the 25-second timeout detection mechanism
2. THE diagram SHALL show Lambda self-invocation for async processing
3. THE diagram SHALL show frontend polling mechanism for result retrieval
4. THE diagram SHALL show DynamoDB message updates during processing
5. THE diagram SHALL show timing annotations for typical operation durations
6. THE diagram SHALL show error handling and retry logic

### Requirement 10: Deployment and CI/CD Pipeline

**User Story:** As a DevOps engineer, I want to see the deployment pipeline, so that I can understand infrastructure provisioning and updates.

#### Acceptance Criteria

1. THE diagram SHALL show GitHub as the source code repository
2. THE diagram SHALL show GitHub Actions as the CI/CD platform
3. THE diagram SHALL show AWS CDK for infrastructure as code
4. THE diagram SHALL show CloudFormation stack deployment
5. THE diagram SHALL show deployment stages (dev, staging, production)
6. THE diagram SHALL show automated testing gates
7. THE diagram SHALL show rollback mechanisms


{
  "version": 3,
  "sources": ["../../../lambda-functions/api-utility/index.ts", "../../../lambda-functions/api-utility/handler.ts"],
  "sourcesContent": ["export { handler } from './handler';\n", "/**\n * Utility API Lambda Handler\n * Handles utility routes:\n * - POST /api/global-directory-scan\n * - GET /api/test-renewable-config\n */\n\nimport { APIGatewayProxyEventV2, APIGatewayProxyResultV2 } from 'aws-lambda';\n\nexport const handler = async (\n  event: APIGatewayProxyEventV2\n): Promise<APIGatewayProxyResultV2> => {\n  const path = event.requestContext.http.path;\n  const method = event.requestContext.http.method;\n\n  console.log(`[Utility API] ${method} ${path}`);\n\n  try {\n    // Global directory scan\n    if (path === '/api/global-directory-scan' && method === 'POST') {\n      return await handleDirectoryScan(event);\n    }\n\n    // Test renewable config\n    if (path === '/api/test-renewable-config') {\n      return await handleTestConfig(event);\n    }\n\n    return {\n      statusCode: 404,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      body: JSON.stringify({ error: 'Not found', path, method }),\n    };\n  } catch (error) {\n    console.error('[Utility API] Error:', error);\n    return {\n      statusCode: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      body: JSON.stringify({\n        error: 'Internal server error',\n        message: error instanceof Error ? error.message : 'Unknown error',\n      }),\n    };\n  }\n};\n\nasync function handleDirectoryScan(event: APIGatewayProxyEventV2): Promise<APIGatewayProxyResultV2> {\n  try {\n    const body = event.body ? JSON.parse(event.body) : {};\n    \n    // Placeholder implementation\n    return {\n      statusCode: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      body: JSON.stringify({\n        status: 'scanned',\n        files: [],\n        timestamp: new Date().toISOString(),\n      }),\n    };\n  } catch (error) {\n    return {\n      statusCode: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      body: JSON.stringify({\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }),\n    };\n  }\n}\n\nasync function handleTestConfig(event: APIGatewayProxyEventV2): Promise<APIGatewayProxyResultV2> {\n  try {\n    return {\n      statusCode: 200,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      body: JSON.stringify({\n        status: 'ok',\n        config: {\n          environment: process.env.AWS_REGION,\n        },\n        timestamp: new Date().toISOString(),\n      }),\n    };\n  } catch (error) {\n    return {\n      statusCode: 500,\n      headers: {\n        'Content-Type': 'application/json',\n        'Access-Control-Allow-Origin': '*',\n      },\n      body: JSON.stringify({\n        error: error instanceof Error ? error.message : 'Unknown error',\n      }),\n    };\n  }\n}\n"],
  "mappings": ";;;;;;;;;;;;;;;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;;;ACSO,IAAM,UAAU,OACrB,UACqC;AACrC,QAAM,OAAO,MAAM,eAAe,KAAK;AACvC,QAAM,SAAS,MAAM,eAAe,KAAK;AAEzC,UAAQ,IAAI,iBAAiB,MAAM,IAAI,IAAI,EAAE;AAE7C,MAAI;AAEF,QAAI,SAAS,gCAAgC,WAAW,QAAQ;AAC9D,aAAO,MAAM,oBAAoB,KAAK;AAAA,IACxC;AAGA,QAAI,SAAS,8BAA8B;AACzC,aAAO,MAAM,iBAAiB,KAAK;AAAA,IACrC;AAEA,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,+BAA+B;AAAA,MACjC;AAAA,MACA,MAAM,KAAK,UAAU,EAAE,OAAO,aAAa,MAAM,OAAO,CAAC;AAAA,IAC3D;AAAA,EACF,SAAS,OAAO;AACd,YAAQ,MAAM,wBAAwB,KAAK;AAC3C,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,+BAA+B;AAAA,MACjC;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO;AAAA,QACP,SAAS,iBAAiB,QAAQ,MAAM,UAAU;AAAA,MACpD,CAAC;AAAA,IACH;AAAA,EACF;AACF;AAEA,eAAe,oBAAoB,OAAiE;AAClG,MAAI;AACF,UAAM,OAAO,MAAM,OAAO,KAAK,MAAM,MAAM,IAAI,IAAI,CAAC;AAGpD,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,+BAA+B;AAAA,MACjC;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,QAAQ;AAAA,QACR,OAAO,CAAC;AAAA,QACR,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,MACpC,CAAC;AAAA,IACH;AAAA,EACF,SAAS,OAAO;AACd,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,+BAA+B;AAAA,MACjC;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,iBAAiB,QAAQ,MAAM,UAAU;AAAA,MAClD,CAAC;AAAA,IACH;AAAA,EACF;AACF;AAEA,eAAe,iBAAiB,OAAiE;AAC/F,MAAI;AACF,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,+BAA+B;AAAA,MACjC;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,QAAQ;AAAA,QACR,QAAQ;AAAA,UACN,aAAa,QAAQ,IAAI;AAAA,QAC3B;AAAA,QACA,YAAW,oBAAI,KAAK,GAAE,YAAY;AAAA,MACpC,CAAC;AAAA,IACH;AAAA,EACF,SAAS,OAAO;AACd,WAAO;AAAA,MACL,YAAY;AAAA,MACZ,SAAS;AAAA,QACP,gBAAgB;AAAA,QAChB,+BAA+B;AAAA,MACjC;AAAA,MACA,MAAM,KAAK,UAAU;AAAA,QACnB,OAAO,iBAAiB,QAAQ,MAAM,UAAU;AAAA,MAClD,CAAC;AAAA,IACH;AAAA,EACF;AACF;",
  "names": []
}
